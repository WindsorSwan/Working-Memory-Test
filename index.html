<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Memory Testing App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            background: white;
            padding: 2px;
            padding-left: 10px;
            margin-right: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-top: 8px;
            margin-bottom: 0px;
            padding: 2px;
            font-size: 24px;
        }
        .test-selector {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-button {
            color: black;
            border: 2px solid black;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        .test-button:nth-of-type(1) {
            background: rgba(255, 179, 179, 0.6);
        }
        .test-button:nth-of-type(1):hover {
            background: rgba(229, 150, 150, 0.6);
        }
        .test-button:nth-of-type(2) {
            background: rgba(144, 238, 144, 0.6);
        }
        .test-button:nth-of-type(2):hover {
            background: rgba(120, 200, 120, 0.6);
        }
        .test-button:nth-of-type(3) {
            background: rgba(173, 216, 230, 0.6);
        }
        .test-button:nth-of-type(3):hover {
            background: rgba(150, 190, 210, 0.6);
        }
        .question-container {
            margin-top: 8px;
            margin-bottom: 30px;
            padding: 2px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2px;
        }
        .question-number {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-left: 10px;
        }
        .timer {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
        }
        .equations {
            margin: 2px 0;
            font-size: 18px;
            line-height: 2;
        }
        .equation {
            margin: 4px 0;
            margin-left: 10px;
            margin-right: 10px;
            padding: 0px 0px 0px 10px;
            background: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid black;
        }
        .equation:hover {
            background: #e9ecef;
        }
        .equation.selected {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }
        .instruction {
            font-weight: bold;
            color: #2c3e50;
            margin: 2px 0;
            margin-left: 10px;
            font-size: 16px;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 2px 0;
        }
        .option-button {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            padding: 2px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            min-width: 80px;
        }
        .option-button:hover {
            background: #d5dbdb;
        }
        .option-button.selected {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }
        .next-button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 2px;
            margin-left: 10px;
        }
        .next-button:hover {
            background: #229954;
        }
        .next-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        .spatial-layout {
            display: flex;
            gap: 20px;
            margin: 2px 0;
            padding: 10px;
        }
        .emoji-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            flex: 0 0 auto;
        }
        .emoji-box {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            border: 2px solid #bdc3c7;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        .emoji-box:hover {
            background: #e9ecef;
            border-color: #7f8c8d;
        }
        .emoji-box.selected {
            background: #3498db;
            border-color: #2980b9;
            transform: scale(1.1);
        }
        .steps-container {
            margin: 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            flex: 1;
        }
        .step {
            margin: 8px 0;
            margin-left: 0;
            font-size: 16px;
            padding: 8px;
            background: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .hidden {
            display: none;
        }
        .results {
            text-align: center;
            padding: 2px;
        }
        .score {
            font-size: 24px;
            color: #27ae60;
            font-weight: bold;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Working Memory Testing App</h1>
        
        <!-- Test Selection -->
        <div id="test-selection" class="test-selector">
            <h2>Select a Test</h2>
            
            <!-- Venn Diagram -->
            <div style="text-align: center; margin: 0;">
                <svg width="300" height="250" viewBox="0 0 300 250">
                    <!-- MMN Circle (left, pink) -->
                    <circle cx="120" cy="120" r="70" fill="#ffb3b3" opacity="0.7" stroke="#ff6b6b" stroke-width="2"/>
                    
                    <!-- MMV Circle (top right, green) -->
                    <circle cx="180" cy="90" r="70" fill="#90EE90" opacity="0.7" stroke="#32CD32" stroke-width="2"/>
                    
                    <!-- MMS Circle (bottom right, blue) -->
                    <circle cx="180" cy="150" r="70" fill="#ADD8E6" opacity="0.7" stroke="#4169E1" stroke-width="2"/>
                    
                    <!-- Labels in non-overlapping areas -->
                    <text x="55" y="125" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000">MMN</text>
                    <text x="180" y="60" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000">MMV</text>
                    <text x="180" y="185" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000">MMS</text>
                    
                    <!-- Center label where all three overlap -->
                    <text x="135" y="125" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#000">Gsm</text>
                </svg>
            </div>
            
            <button class="test-button" onclick="startTest('numerical')">
                Median Mode - Numerical<br>
                <small style="font-size: 12px; opacity: 0.8;">10 questions &bull; 30 seconds each &bull; Max 5 minutes</small>
            </button>
            <button class="test-button" onclick="startTest('verbal')">
                Median Mode - Verbal<br>
                <small style="font-size: 12px; opacity: 0.8;">10 questions &bull; 30 seconds each &bull; Max 5 minutes</small>
            </button>
            <button class="test-button" onclick="startTest('spatial')">
                Median Mode - Spatial<br>
                <small style="font-size: 12px; opacity: 0.8;">10 questions &bull; 30 seconds each &bull; Max 5 minutes</small>
            </button>
        </div>

        <!-- Test Container -->
        <div id="test-container" class="hidden">
            <div class="question-container">
                <div class="question-header">
                    <div class="question-number" id="question-number">Example 1</div>
                    <div class="timer" id="timer"></div>
                </div>
                
                <div class="instruction" id="instruction-text"></div>
                
                <button class="next-button" id="next-button" onclick="nextQuestion()" disabled>Next</button>
                
                <div id="question-content"></div>
                
                <div class="options" id="options-container"></div>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="results hidden">
            <h2>Test Complete!</h2>
            <div class="score" id="final-score"></div>
            <button class="test-button" onclick="backToMenu()">Back to Menu</button>
        </div>
        
        <div style="text-align: center; margin-top: 20px; padding: 10px; color: #7f8c8d; font-size: 14px;">
            Copyright Windsor Swan 2025
        </div>
    </div>

    <script>
        let currentTest = '';
        let currentQuestion = 0;
        let isExample = true;
        let showingSolution = false;
        let selectedAnswer = null;
        let timer = null;
        let timeLeft = 0;
        let score = 0;

        const spatialQuestions = [
            {
                steps: [
                    '1st: 🌳 moves 3 spaces ↓'
                ],
                correctAnswer: 3,
                isExample: false
            },
            {
                steps: [
                    '1st: 🌈 moves 2 spaces →',
                    '2nd: 🟦 moves 2 spaces ↓'
                ],
                correctAnswer: 1,
                isExample: false
            },
            {
                steps: [
                    '1st: ⚡ moves 3 spaces ↓',
                    '2nd: ⭐ moves 2 spaces →',
                    '3rd: 🌳 moves 1 space ↓'
                ],
                correctAnswer: 2,
                isExample: false
            }
        ];

        const verbalQuestions = [
            {
                words: ['KICS', 'ELBL', 'LIMD', 'UBMN', 'GALF'],
                unscrambled: ['SICK', 'BELL', 'MILD', 'NUMB', 'FLAG'],
                alphabetical: ['BELL', 'FLAG', 'MILD', 'NUMB', 'SICK'],
                medianWord: 'MILD',
                correctAnswer: 'C',
                isExample: true
            },
            {
                words: ['KICP', 'UIQZ', 'PMUJ'],
                correctAnswer: 'B',
                isExample: false
            },
            {
                words: ['VEDI', 'EZNO', 'RAHI'],
                correctAnswer: 'A',
                isExample: false
            },
            {
                words: ['RKAD', 'RBDI', 'OCKO', 'LULF', 'KIWN'],
                correctAnswer: 'C',
                isExample: false
            },
            {
                words: ['LIWL', 'ITDR', 'LEOH', 'ROOP', 'KSIR'],
                correctAnswer: 'B',
                isExample: false
            },
            {
                words: ['KACB', 'IZSE', 'ILHL', 'HTCA', 'PLLU'],
                correctAnswer: 'C',
                isExample: false
            },
            {
                words: ['INAR', 'VEOL', 'APLC', 'YWAA', 'ABOT', 'EMOH', 'OMRF'],
                correctAnswer: 'D',
                isExample: false
            },
            {
                words: ['IGHH', 'TORO', 'TIUQ', 'NEPO', 'VOEM', 'SHIW', 'NTAK'],
                correctAnswer: 'D',
                isExample: false
            },
            {
                words: ['OKOH', 'KINP', 'OODG', 'NIWD', 'BRUN', 'YVRE', 'YATS'],
                correctAnswer: 'C',
                isExample: false
            },
            {
                words: ['NALD', 'KROW', 'NEVT', 'NUTH', 'WANY', 'KOBO', 'KISN', 'LROL', 'ADDE'],
                correctAnswer: 'E',
                isExample: false
            },
            {
                words: ['ALNP', 'XTIE', 'FEBE', 'WODN', 'DOFO', 'EXPA', 'ENOG', 'STOM', 'RACD'],
                correctAnswer: 'F',
                isExample: false
            }
        ];

        const numericalQuestions = [
            {
                equations: ['A) 12+4', 'B) 9-6', 'C) 8+11', 'D) 2+2', 'E) 12-1'],
                solutions: ['16', '3', '19', '4', '11'],
                sorted: ['3', '4', '11', '16', '19'],
                medianValue: '11',
                correctAnswer: 'E',
                isExample: true
            },
            {
                equations: ['A) 2+2', 'B) 2+4', 'C) 4+6'],
                correctAnswer: 'B',
                isExample: false
            },
            {
                equations: ['A) 3+9', 'B) 3-1', 'C) 3+1'],
                correctAnswer: 'C',
                isExample: false
            },
            {
                equations: ['A) 11+5', 'B) 22-9', 'C) 9+12', 'D) 20-15', 'E) 6+1'],
                correctAnswer: 'B',
                isExample: false
            },
            {
                equations: ['A) 3-1', 'B) 24+4', 'C) 16-13', 'D) 20-5', 'E) 29-12'],
                correctAnswer: 'D',
                isExample: false
            },
            {
                equations: ['A) 9+9', 'B) 13-1', 'C) 18-16', 'D) 2+22', 'E) 16+13', 'F) 7-2', 'G) 25-6'],
                correctAnswer: 'A',
                isExample: false
            },
            {
                equations: ['A) 29-7', 'B) 3+13', 'C) 10-5', 'D) 4-1', 'E) 30-11', 'F) 17+9', 'G) 12+12'],
                correctAnswer: 'E',
                isExample: false
            },
            {
                equations: ['A) 17-9', 'B) 24+2', 'C) 9+11', 'D) 5-1', 'E) 6+6', 'F) 27-2', 'G) 9+5'],
                correctAnswer: 'G',
                isExample: false
            },
            {
                equations: ['A) 15-6', 'B) 30-7', 'C) 18+1', 'D) 19+9', 'E) 2+4', 'F) 3+1', 'G) 6-5', 'H) 11-4', 'I) 13+13'],
                correctAnswer: 'A',
                isExample: false
            },
            {
                equations: ['A) 26-6', 'B) 7+6', 'C) 12-4', 'D) 19-12', 'E) 2+3', 'F) 14+13', 'G) 10-9', 'H) 1+1', 'I) 16-10'],
                correctAnswer: 'D',
                isExample: false
            },
            {
                equations: ['A) 28-7', 'B) 1+11', 'C) 5-3', 'D) 21+7', 'E) 13+9', 'F) 16+10', 'G) 4+3', 'H) 7+17', 'I) 20-2'],
                correctAnswer: 'A',
                isExample: false
            }
        ];

        function startTest(testType) {
            currentTest = testType;
            currentQuestion = 0;
            showingSolution = false;
            score = 0;
            
            if (testType === 'spatial') {
                isExample = false;
            } else {
                isExample = true;
            }
            
            document.getElementById('test-selection').classList.add('hidden');
            document.getElementById('test-container').classList.remove('hidden');
            
            showQuestion();
        }

        function showQuestion() {
            selectedAnswer = null;
            document.getElementById('next-button').disabled = true;
            
            if (currentTest === 'numerical') {
                if (isExample && showingSolution) {
                    showNumericalSolution();
                } else {
                    showNumericalQuestion();
                }
            } else if (currentTest === 'verbal') {
                if (isExample && showingSolution) {
                    showVerbalSolution();
                } else {
                    showVerbalQuestion();
                }
            } else if (currentTest === 'spatial') {
                showSpatialQuestion();
            }
            
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            if (!isExample) {
                startTimer(30);
            }
        }

        function showVerbalQuestion() {
            const question = verbalQuestions[currentQuestion];
            const questionNum = isExample ? 'Example' : `Question ${currentQuestion}`;
            
            document.getElementById('question-number').textContent = questionNum;
            document.getElementById('instruction-text').textContent = 'Unjumble each word and sort into alphabetical order. Then select the MIDDLE or MEDIAN word.';
            
            let content = '<div class="equations">';
            question.words.forEach((word, index) => {
                content += `<div class="equation" onclick="selectEquation(${index})">${word}</div>`;
            });
            content += '</div>';
            
            document.getElementById('question-content').innerHTML = content;
            document.getElementById('options-container').innerHTML = '';
        }

        function showNumericalSolution() {
            const question = numericalQuestions[currentQuestion];
            
            document.getElementById('question-number').textContent = 'Example - Solution';
            document.getElementById('instruction-text').textContent = 'Solve the equations and select the MIDDLE or MEDIAN value.';
            
            let content = '<div class="equations">';
            question.equations.forEach((eq, index) => {
                const cleanEq = eq.substring(3);
                content += `<div class="equation">${cleanEq}=<span style="color: green; font-weight: bold;">${question.solutions[index]}</span></div>`;
            });
            content += '</div>';
            
            content += '<div style="margin: 20px 0; font-size: 18px;">';
            content += 'Numerical order: ';
            question.sorted.forEach((value, index) => {
                if (value === question.medianValue) {
                    content += `<span style="color: green; font-weight: bold;">${value}</span>`;
                } else {
                    content += value;
                }
                if (index < question.sorted.length - 1) {
                    content += ',';
                }
            });
            content += '</div>';
            
            content += `<div style="margin: 20px 0; font-size: 18px; font-weight: bold;">The answer is therefore ${question.medianValue}.</div>`;
            
            document.getElementById('question-content').innerHTML = content;
            document.getElementById('options-container').innerHTML = '';
            document.getElementById('next-button').disabled = false;
            document.getElementById('next-button').textContent = 'Continue to Questions';
        }

        function showVerbalSolution() {
            const question = verbalQuestions[currentQuestion];
            
            document.getElementById('question-number').textContent = 'Example - Solution';
            document.getElementById('instruction-text').textContent = 'Unjumble each word and sort into alphabetical order. Then select the MIDDLE or MEDIAN word.';
            
            let content = '<div class="equations">';
            question.words.forEach((word, index) => {
                content += `<div class="equation">${word} - <span style="color: green; font-weight: bold;">${question.unscrambled[index]}</span></div>`;
            });
            content += '</div>';
            
            content += '<div style="margin: 20px 0; font-size: 18px;">';
            content += 'Alphabetical order: ';
            question.alphabetical.forEach((word, index) => {
                if (word === question.medianWord) {
                    content += `<span style="color: green; font-weight: bold;">${word}</span>`;
                } else {
                    content += word;
                }
                if (index < question.alphabetical.length - 1) {
                    content += ', ';
                }
            });
            content += '</div>';
            
            content += `<div style="margin: 20px 0; font-size: 18px; font-weight: bold;">The answer is therefore ${question.medianWord}.</div>`;
            
            document.getElementById('question-content').innerHTML = content;
            document.getElementById('options-container').innerHTML = '';
            document.getElementById('next-button').disabled = false;
            document.getElementById('next-button').textContent = 'Continue to Questions';
        }

        function showNumericalQuestion() {
            const question = numericalQuestions[currentQuestion];
            const questionNum = isExample ? 'Example' : `Question ${currentQuestion}`;
            
            document.getElementById('question-number').textContent = questionNum;
            document.getElementById('instruction-text').textContent = 'Solve the equations and select the MIDDLE or MEDIAN value.';
            
            let content = '<div class="equations">';
            question.equations.forEach((eq, index) => {
                const cleanEq = eq.substring(3);
                content += `<div class="equation" onclick="selectEquation(${index})">${cleanEq}</div>`;
            });
            content += '</div>';
            
            document.getElementById('question-content').innerHTML = content;
            document.getElementById('options-container').innerHTML = '';
        }

        function showSpatialQuestion() {
            const question = spatialQuestions[currentQuestion];
            const questionNum = `Question ${currentQuestion + 1}`;
            
            document.getElementById('question-number').textContent = questionNum;
            document.getElementById('instruction-text').textContent = 'Follow the steps mentally and select which emoji is in the MIDDLE position.';
            
            const emojis = ['⚡', '❤️', '🌳', '🌈', '🟦', '⭐', '▲'];
            let content = '<div class="spatial-layout">';
            content += '<div class="emoji-container">';
            emojis.forEach((emoji, index) => {
                let fontSize = '30px';
                if (emoji === '▲') fontSize = '36px';
                else if (emoji === '⚡') fontSize = '33px';
                else if (emoji === '🟦') fontSize = '26px';
                content += `<div class="emoji-box" onclick="selectEmoji(${index})" style="font-size: ${fontSize};">${emoji}</div>`;
            });
            content += '</div>';
            
            content += '<div class="steps-container">';
            question.steps.forEach(step => {
                content += `<div class="step">${step}</div>`;
            });
            content += '</div></div>';
            
            document.getElementById('question-content').innerHTML = content;
            document.getElementById('options-container').innerHTML = '';
        }

        function selectEmoji(index) {
            document.querySelectorAll('.emoji-box').forEach(box => {
                box.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            selectedAnswer = index;
            document.getElementById('next-button').disabled = false;
        }

        function selectEquation(index) {
            document.querySelectorAll('.equation').forEach(eq => {
                eq.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            
            const letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];
            selectedAnswer = letters[index];
            document.getElementById('next-button').disabled = false;
        }

        function startTimer(seconds) {
            timeLeft = seconds;
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timer = null;
                    nextQuestion();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            if (isExample) {
                timerElement.textContent = '';
            } else {
                timerElement.textContent = `Time: ${timeLeft}s`;
            }
        }

        function nextQuestion() {
            if (isExample && !showingSolution) {
                showingSolution = true;
                showQuestion();
                return;
            }
            
            if (!isExample && selectedAnswer !== null) {
                let question;
                let isCorrect = false;
                
                if (currentTest === 'numerical') {
                    question = numericalQuestions[currentQuestion];
                    isCorrect = selectedAnswer === question.correctAnswer;
                } else if (currentTest === 'verbal') {
                    question = verbalQuestions[currentQuestion];
                    isCorrect = selectedAnswer === question.correctAnswer;
                } else if (currentTest === 'spatial') {
                    question = spatialQuestions[currentQuestion];
                    isCorrect = selectedAnswer === question.correctAnswer;
                }
                
                if (isCorrect) {
                    score++;
                }
            }
            
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            
            currentQuestion++;
            showingSolution = false;
            document.getElementById('next-button').textContent = 'Next';
            
            if (isExample && currentQuestion === 1) {
                isExample = false;
                currentQuestion = 1;
            }
            
            let totalQuestions;
            if (currentTest === 'numerical') {
                totalQuestions = numericalQuestions.length;
            } else if (currentTest === 'verbal') {
                totalQuestions = verbalQuestions.length;
            } else if (currentTest === 'spatial') {
                totalQuestions = spatialQuestions.length;
            }
            
            if (currentQuestion >= totalQuestions) {
                showResults();
                return;
            }
            
            showQuestion();
        }

        function showResults() {
            document.getElementById('test-container').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            
            const totalQuestions = 10;
            document.getElementById('final-score').textContent = `Score: ${score}/${totalQuestions}`;
        }

        function backToMenu() {
            document.getElementById('results').classList.add('hidden');
            document.getElementById('test-selection').classList.remove('hidden');
            showingSolution = false;
            document.getElementById('next-button').textContent = 'Next';
            
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
        }

        updateTimerDisplay();
    </script>
</body>
</html>
